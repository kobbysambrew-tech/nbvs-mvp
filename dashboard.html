<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NBVS Dashboard</title>
<style>
  body { font-family: Arial; background: #eef; padding: 20px; }
  h1 { color: #004d00; }
  input, button { margin: 5px; padding: 10px; }
  .counter { background: white; padding: 10px; margin-top: 10px; border-radius: 10px; }
</style>
</head>
<body>
  <h1>Admin Dashboard</h1>
  <button onclick="logout()">Logout</button>

  <h2>Add Record</h2>
  <input id="personName" placeholder="Full Name">
  <input id="personID" placeholder="National ID">
  <button onclick="addRecord()">Save Record</button>

  <h2>Search Record</h2>
  <input id="searchID" placeholder="Enter National ID">
  <button onclick="searchRecord()">Search</button>
  <p id="result"></p>

  <div class="counter">
    <h3>Activity Tracker</h3>
    <p>Total Logins: <span id="loginCount">0</span></p>
    <p>Total Searches: <span id="searchCount">0</span></p>
  </div>

<script>
if (!localStorage.getItem("isAdmin")) {
  alert("Unauthorized. Please log in.");
  window.location.href = "login.html";
}

if (!localStorage.getItem("loginCount")) localStorage.setItem("loginCount", "0");
let logins = parseInt(localStorage.getItem("loginCount"));
logins++;
localStorage.setItem("loginCount", logins);
document.getElementById("loginCount").innerText = logins;

if (!localStorage.getItem("searchCount")) localStorage.setItem("searchCount", "0");

function addRecord() {
  const name = document.getElementById("personName").value;
  const id = document.getElementById("personID").value;
  if (!name || !id) return alert("Enter both fields.");
  localStorage.setItem(id, name);
  alert("✅ Record saved!");
}

function searchRecord() {
  let searches = parseInt(localStorage.getItem("searchCount"));
  searches++;
  localStorage.setItem("searchCount", searches);
  document.getElementById("searchCount").innerText = searches;

  const id = document.getElementById("searchID").value;
  const name = localStorage.getItem(id);
  document.getElementById("result").innerText = name ? `✅ Found: ${name}` : "❌ Record not found";
}

function logout() {
  localStorage.removeItem("isAdmin");
  window.location.href = "index.html";
}
</script>
</body>
</html>
