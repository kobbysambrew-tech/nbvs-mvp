<!DOCTYPE html>
<html>
<head>
  <title>NBVS Analytics</title>
  <style>
    body { font-family: Arial; padding: 20px; background:#f8f9fa; }
    h1 { color:#006b3f; }
    table { width:100%; border-collapse: collapse; margin-top:20px; }
    th, td { border:1px solid #ccc; padding:8px; }
    th { background:#006b3f; color:white; }
  </style>
</head>
<body>
  <h1>NBVS Analytics Dashboard</h1>
  <p><b>Total Searches:</b> <span id="total"></span></p>

  <table>
    <thead>
      <tr>
        <th>Search Term</th>
        <th>Timestamp</th>
        <th>Platform</th>
      </tr>
    </thead>
    <tbody id="logs"></tbody>
  </table>

  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
import { 
  getFirestore, collection, getDocs 
} from "https://www.gstatic.com/firebasejs/10.7.2/firebase-firestore.js";

// Firebase
const firebaseConfig = { ... SAME CONFIG ... };
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Table elements
const totalLabel = document.getElementById("totalCount");
const tableBody = document.getElementById("logTable");

// Load logs
async function loadLogs() {
  const logs = await getDocs(collection(db, "search_logs"));

  let count = 0;
  tableBody.innerHTML = "";

  logs.forEach(log => {
    const data = log.data();
    count++;

    tableBody.innerHTML += `
      <tr>
        <td>${data.term}</td>
        <td>${new Date(data.timestamp?.toMillis()).toLocaleString()}</td>
        <td>${data.platform}</td>
      </tr>`;
  });

  totalLabel.textContent = count;
}

loadLogs();
</script>

   

</body>
</html>
